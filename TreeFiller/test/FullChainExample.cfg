# $Id: FullChainExample.cfg,v 1.3 2008/06/17 07:47:55 loizides Exp $

process Rec = 
{
    untracked PSet maxEvents = { untracked int32 input = 10 }

    include "Configuration/StandardSequences/data/Services.cff"
    include "Configuration/StandardSequences/data/Geometry.cff"
    include "Configuration/StandardSequences/data/MagneticField.cff"
    include "Configuration/StandardSequences/data/FakeConditions.cff" 
    include "FWCore/MessageService/data/MessageLogger.cfi"
    
    # Sample generator configuration  
    source = PythiaSource 
    { 
        untracked int32 pythiaPylistVerbosity = 1
        untracked bool pythiaHepMCVerbosity = false
        untracked int32 maxEventsToPrint = 3
        # put here the cross section of your process (in pb)
        untracked double crossSection = 0.00212
        # put here the efficiency of your filter (1. if no filter)
        untracked double filterEfficiency = 1.
        PSet PythiaParameters = {
            vstring parameterSets = {
                "processParameters"
            }

            include "Configuration/Generator/data/PythiaUESettings.cfi"
 
            vstring processParameters = {
                "PMAS(25,1)=180.0        !mass of Higgs",
                "MSEL=0                  ! user selection for process",
#                "MSTJ(41)=1              !Switch off Pythia QED bremsshtrahlung",
                "MSUB(102)=1             !ggH",
                "MSUB(123)=1             !ZZ fusion to H",
                "MSUB(124)=1             !WW fusion to H",
                "CKIN(45)=5.             !high mass cut on m2 in 2 to 2 process",
                "CKIN(46)=150.           !high mass cut on secondary resonance m1 in 2->1->2 process",
                "CKIN(47)=5.             !low mass cut on secondary resonance m2 in 2->1->2 process",
                "CKIN(48)=150.           !high mass cut on secondary resonance m2 in 2->1->2 process",
                # Z decays
                "MDME(174,1)=0           !Z decay into d dbar",        
                "MDME(175,1)=0           !Z decay into u ubar",
                "MDME(176,1)=0           !Z decay into s sbar",
                "MDME(177,1)=0           !Z decay into c cbar",
                "MDME(178,1)=0           !Z decay into b bbar",
                "MDME(179,1)=0           !Z decay into t tbar",
                "MDME(182,1)=1           !Z decay into e- e+",
                "MDME(183,1)=0           !Z decay into nu_e nu_ebar",
                "MDME(184,1)=1           !Z decay into mu- mu+",
                "MDME(185,1)=0           !Z decay into nu_mu nu_mubar",
                "MDME(186,1)=1           !Z decay into tau- tau+",
                "MDME(187,1)=0           !Z decay into nu_tau nu_taubar",
                # Higgs decays
                "MDME(210,1)=0           !Higgs decay into dd",
                "MDME(211,1)=0           !Higgs decay into uu",
                "MDME(212,1)=0           !Higgs decay into ss",
                "MDME(213,1)=0           !Higgs decay into cc",
                "MDME(214,1)=0           !Higgs decay into bb",
                "MDME(215,1)=0           !Higgs decay into tt",
                "MDME(216,1)=0           !Higgs decay into",
                "MDME(217,1)=0           !Higgs decay into Higgs decay",
                "MDME(218,1)=0           !Higgs decay into e nu e",
                "MDME(219,1)=0           !Higgs decay into mu nu mu",
                "MDME(220,1)=0           !Higgs decay into tau nu tau",
                "MDME(221,1)=0           !Higgs decay into Higgs decay",
                "MDME(222,1)=0           !Higgs decay into g g",
                "MDME(223,1)=0           !Higgs decay into gam gam",
                "MDME(224,1)=0           !Higgs decay into gam Z",
                "MDME(225,1)=1           !Higgs decay into Z Z",
                "MDME(226,1)=0           !Higgs decay into W W"
            }
        }
    }
    
    # load generator sequence (VtxSmeared is needed inside, missing dependence)
    include "Configuration/StandardSequences/data/VtxSmearedBetafuncEarlyCollision.cff"
    include "Configuration/StandardSequences/data/Generator.cff"
    
    include "Configuration/StandardSequences/data/Simulation.cff"
    include "Configuration/StandardSequences/data/MixingNoPileUp.cff" 
    include "Configuration/StandardSequences/data/L1Emulator.cff" 
    include "Configuration/StandardSequences/data/DigiToRaw.cff"
    include "Configuration/StandardSequences/data/VtxSmearedBetafuncEarlyCollision.cff"
    include "Configuration/StandardSequences/data/Reconstruction.cff"
    #include "Configuration/StandardSequences/data/UseZeroBField.cff"
    
    # define the tree service
    service = TreeService { 
        untracked vstring fileNames   = { "mit-full" }
        untracked vstring pathNames   = { "." }
        untracked vuint32 maxSizes    = { 1024 }
        untracked vuint32 compLevels  = { 9 }
        untracked vuint32 splitLevels = { 99 }
        untracked vuint32 brSizes     = { 32000 }
    }
    
    # customize the MIT filler
    module MitTreeFiller = FillMitTree {
    	untracked PSet GenParts = {
		untracked bool active = true
		untracked string mitName = "GenParticles"
		untracked string edmName = "source"
	}
	untracked PSet SimParticles = {
		untracked bool active = true
		untracked string mitName = "SimParticles"
		untracked string edmName = "mergedtruth"
		untracked string edmDataName = "MergedTrackTruth"
	}
	untracked PSet GeneralTracks = {
		untracked bool active = true
		untracked string mitName = "Tracks"
		untracked string edmName = "generalTracks"
		untracked string edmDataName= ""
		untracked string edmSimAssociationName = ""
	}
	untracked PSet StandaloneMuonTracks = {
		untracked bool active = true
		untracked string mitName = "StandaloneMuonTracks"
		untracked string edmName = "standAloneMuons"
		untracked string edmDataName= ""
	}
	untracked PSet StandaloneMuonTracksWVtxConstraint = {
		untracked bool active = true
		untracked string mitName = "StandaloneMuonTracksWVtxConstraint"
		untracked string edmName = "standAloneMuons"
		untracked string edmDataName= "UpdatedAtVtx"
	}
	untracked PSet GlobalMuonTracks = {
		untracked bool active = true
		untracked string mitName = "GlobalMuonTracks"
		untracked string edmName = "globalMuons"
		untracked string edmDataName= ""
	}
	untracked PSet ConversionInOutTracks = {
		untracked bool active = true
		untracked string mitName = "ConversionInOutTracks"
		untracked string edmName = "ckfInOutTracksFromConversions"
		untracked string edmDataName= ""
		untracked string edmSimAssociationName = ""
	}
	untracked PSet ConversionOutInTracks = {
		untracked bool active = true
		untracked string mitName = "ConversionOutInTracks"
		untracked string edmName = "ckfOutInTracksFromConversions"
		untracked string edmDataName= ""
		untracked string edmSimAssociationName = ""
	}
	untracked PSet GsfTracks = {
		untracked bool active = true
		untracked string mitName = "GsfTracks"
		untracked string edmName = "pixelMatchGsfFit"
		untracked string edmDataName= ""
		untracked string edmSimAssociationName = ""
	}
	untracked PSet Muons = {
		untracked bool active = true
		untracked string mitName = "Muons"
		untracked string edmName = "muons"
	}
	untracked PSet Electrons = {
		untracked bool active = true
		untracked string mitName = "Electrons"
		untracked string edmName = "pixelMatchGsfElectrons"
	}
    }
  
    # also make Edm output for the events we generate
    include "Configuration/EventContent/data/EventContent.cff"
    module FEVT = PoolOutputModule
    {
        using FEVTSIMEventContent
        untracked string fileName = "edm-full.root"
    }
    
    # output path for the Edm file
    endpath outpath = { FEVT }
    
    
    path p0 = { pgen}            # generator
    path p1 = { psim}            # simulation
    path p2 = { pdigi}           # digitization
    path p3 = { L1Emulator }     # trigger: level-1 emulation
    path p4 = { DigiToRaw }      # converting digitized to raw data
    path p5 = { reconstruction } # reconstruction
    path p6 = { MitTreeFiller } # MitProd tree filler
    
    schedule = {p0,p1,p2,p3,p4,p5,p6,outpath}
}		
